"use strict";var scrollCorrection=70;function scrolltoElement(e,o){var t=document.createEvent("UIEvents");t.initUIEvent("scroll",!0,!1,window,0),t.stopPropagation(),setTimeout(function(){window.dispatchEvent(t)},320),o=o||scrollCorrection;var a=e.href?$(e.getAttribute("href")):$(e);$("html, body").animate({scrollTop:a.offset().top-o},300)}function setBackToTop(){var t=$(".s-top",".l_body"),a=document.body.scrollTop;$(document,window).scroll(function(){var e=$(window).scrollTop(),o=e-a;150<e?(a=e,t.addClass("show"),0<o?t.removeClass("hl"):t.addClass("hl")):(a=e,t.removeClass("show").removeClass("hl"))}),t.click(function(){return scrolltoElement(document.body)})}function setHeader(){if(window.subData){var t=$("header .wrapper"),e=$(".s-comment",t),o=$(".s-toc",t),a=window.subData.title;t.find(".nav-sub .logo").text(a);var n=document.body.scrollTop;$(document,window).scroll(function(){var e=$(window).scrollTop(),o=e-n;50<=o&&100<e?(n=e,window.subData&&t.addClass("sub")):o<=-50&&(n=e,t.removeClass("sub"))});var r=$("#comments");r.length?e.click(function(e){e.preventDefault(),e.stopPropagation(),scrolltoElement(r)}):e.remove();var i=$(".toc-wrapper");i.length&&i.children().length?o.click(function(e){e.stopPropagation(),i.toggleClass("active")}):o.remove()}}function setHeaderMenu(){var e=$(".l_header .menu");e.find("li a.active").removeClass("active");var o,t=location.pathname.replace(/\/|%/g,"");0==t.length&&(t="home");var a=t.match(/page\d{0,}$/g);a&&t.split(a)[0]&&(t=t.split(a)[0]);var n,r=t.match(/index.html/);r&&(r=r[0],t=t.split(r)[0]),o=$("#"+t,e),(n=o)&&n.length&&n.addClass("active").siblings().removeClass("active")}function setHeaderMenuPhone(){var o=$(".l_header .switcher .s-menu");o.click(function(e){e.stopPropagation(),$("body").toggleClass("z_menu-open"),o.toggleClass("active")}),$(document).click(function(e){$("body").removeClass("z_menu-open"),o.removeClass("active")})}function setHeaderSearch(){var e=$(".l_header .switcher .s-search"),o=$(".l_header"),t=$(".l_header .m_search");0!==e.length&&(e.click(function(e){e.stopPropagation(),o.toggleClass("z_search-open"),t.find("input").focus()}),$(document).click(function(e){o.removeClass("z_search-open")}),t.click(function(e){e.stopPropagation()}),o.ready(function(){o.bind("keydown",function(e){if(9==e.keyCode)return!1;var o,t,a=!!document.all;t=a?(o=window.event.keyCode,window.event):(o=e.which,e),9==o&&(a?(t.keyCode=0,t.returnValue=!1):(t.which=0,t.preventDefault()))})}))}function setTocToggle(){var o=$(".toc-wrapper");if(0!==o.length){$(document).click(function(){return o.removeClass("active")}),o.on("click","a",function(e){e.preventDefault(),e.stopPropagation(),"A"===e.target.tagName?scrolltoElement(e.target):"SPAN"===e.target.tagName&&scrolltoElement(e.target.parentElement),o.removeClass("active")});var n=Array.from(o.find("li a")),e=function(){return n.map(function(e){return Math.floor($(e.getAttribute("href")).offset().top-scrollCorrection)})},r=e(),t=function(){var e=$("html").scrollTop()||$("body").scrollTop();if(r){for(var o=0,t=r.length-1;o<t;){var a=o+t+1>>1;r[a]===e?o=t=a:r[a]<e?o=a:t=a-1}$(n).removeClass("active").eq(o).addClass("active")}};$(window).resize(function(){r=e(),t()}).scroll(function(){t()}),t()}}"google"===SEARCH_SERVICE?new GoogleCustomSearch({apiKey:GOOGLE_CUSTOM_SEARCH_API_KEY,engineId:GOOGLE_CUSTOM_SEARCH_ENGINE_ID,imagePath:"/images/"}):"algolia"===SEARCH_SERVICE?new AlgoliaSearch({apiKey:ALGOLIA_API_KEY,appId:ALGOLIA_APP_ID,indexName:ALGOLIA_INDEX_NAME,imagePath:"/images/"}):"hexo"===SEARCH_SERVICE?new HexoSearch({imagePath:"/images/"}):"azure"===SEARCH_SERVICE?new AzureSearch({serviceName:AZURE_SERVICE_NAME,indexName:AZURE_INDEX_NAME,queryKey:AZURE_QUERY_KEY,imagePath:"/images/"}):"baidu"===SEARCH_SERVICE&&new BaiduSearch({apiId:BAIDU_API_ID,imagePath:"/images/"});